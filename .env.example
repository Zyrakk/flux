# =============================================================================
# Flux â€” Environment Variables
# Copy to .env and fill in your values
# .env is gitignored. Never commit real tokens/passwords.
# =============================================================================

# --- Database (PostgreSQL + pgvector) ---
POSTGRES_USER=flux
POSTGRES_PASSWORD=change-me-now
POSTGRES_DB=flux
DATABASE_URL=postgres://flux:change-me-now@localhost:5432/flux?sslmode=disable

# --- Message Queue (NATS JetStream) ---
NATS_URL=nats://localhost:4222

# --- Cache (Redis / Valkey) ---
REDIS_URL=redis://localhost:6379/0

# --- LLM Provider ---
# provider: glm | openai_compat | anthropic
LLM_PROVIDER=glm
LLM_ENDPOINT=https://open.bigmodel.cn/api/coding/paas/v4
LLM_MODEL=glm-4.7
LLM_API_KEY=your-api-key-here

# --- Embeddings ---
EMBEDDINGS_URL=http://embeddings-svc:8000

# --- Relevance ---
RELEVANCE_THRESHOLD_DEFAULT=0.30
RELEVANCE_THRESHOLD_MIN=0.15
RELEVANCE_THRESHOLD_MAX=0.60
RELEVANCE_THRESHOLD_STEP=0.05
# Format: "source=value,source_type:value,id:uuid=value"
SOURCE_BOOSTS=tl;dr sec=0.1

# --- Briefing ---
BRIEFING_SCHEDULE=0 3 * * *

# --- API Server ---
API_PORT=8080
AUTH_TOKEN=
LOG_LEVEL=info

# --- Profile recalculation ---
# immediate: recalculate section profile after each like/dislike
# hourly: processor recalculates all sections every PROFILE_RECALC_EVERY
PROFILE_RECALC_TRIGGER=immediate
PROFILE_RECALC_EVERY=1h

# --- Rate Limits (comma-separated domain=rate) ---
RATE_LIMITS=reddit.com=60/min,oauth.reddit.com=60/min,hacker-news.firebaseio.com=30/min,api.github.com=5000/hour,default=10/min

# --- User Agent for outbound requests ---
USER_AGENT=Flux/1.0 (+https://github.com/zyrak/flux)

# --- Worker Runtime ---
WORKER_MODE_RSS=daemon
WORKER_MODE_HN=daemon
WORKER_MODE_REDDIT=daemon
WORKER_MODE_GITHUB=daemon
HN_MIN_SCORE=10

# --- Frontend runtime ---
API_INTERNAL_URL=http://api:8080

# --- Reddit OAuth (Phase 4) ---
REDDIT_CLIENT_ID=
REDDIT_CLIENT_SECRET=
REDDIT_USERNAME=
REDDIT_PASSWORD=

# --- GitHub Token (Phase 4) ---
GITHUB_TOKEN=
